import React, { useRef, useEffect } from 'react';
import { cx } from '@arwes/tools';
import { memo, mergeRefs } from '@arwes/react-tools';
import { useAnimator } from '@arwes/react-animator';
import { createBackgroundPuffs } from '@arwes/bgs';
import { positionedStyle } from '../internal/styles.js';
const Puffs = memo((props) => {
    const { elementRef: elementRefExternal, id, className, style, positioned = true } = props;
    const animator = useAnimator();
    const elementRef = useRef(null);
    const settingsRef = useRef(props);
    settingsRef.current = props;
    useEffect(() => {
        const canvas = elementRef.current;
        if (!canvas) {
            return;
        }
        const background = createBackgroundPuffs({
            canvas,
            animator: animator?.node,
            settingsRef
        });
        return () => background.cancel();
    }, [animator]);
    return (React.createElement("canvas", { role: "presentation", ref: mergeRefs(elementRef, elementRefExternal), id: id, className: cx('arwes-bgs-puffs', className), style: { ...(positioned ? positionedStyle : null), ...style } }));
});
export { Puffs };
