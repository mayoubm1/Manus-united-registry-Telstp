"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.GridLines = void 0;
const tslib_1 = require("tslib");
const react_1 = tslib_1.__importStar(require("react"));
const tools_1 = require("@arwes/tools");
const react_tools_1 = require("@arwes/react-tools");
const react_animator_1 = require("@arwes/react-animator");
const bgs_1 = require("@arwes/bgs");
const styles_js_1 = require("../internal/styles.js");
const GridLines = (0, react_tools_1.memo)((props) => {
    const { elementRef: elementRefExternal, id, className, style, positioned = true } = props;
    const animator = (0, react_animator_1.useAnimator)();
    const elementRef = (0, react_1.useRef)(null);
    const settingsRef = (0, react_1.useRef)(props);
    settingsRef.current = props;
    (0, react_1.useEffect)(() => {
        const canvas = elementRef.current;
        if (!canvas) {
            return;
        }
        const background = (0, bgs_1.createBackgroundGridLines)({
            canvas,
            animator: animator?.node,
            settingsRef
        });
        return () => background.cancel();
    }, [animator]);
    return (react_1.default.createElement("canvas", { role: "presentation", ref: (0, react_tools_1.mergeRefs)(elementRef, elementRefExternal), id: id, className: (0, tools_1.cx)('arwes-bgs-gridlines', className), style: { ...(positioned ? styles_js_1.positionedStyle : null), ...style } }));
});
exports.GridLines = GridLines;
