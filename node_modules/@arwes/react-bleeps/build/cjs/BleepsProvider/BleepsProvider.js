"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BleepsProvider = void 0;
const tslib_1 = require("tslib");
const react_1 = tslib_1.__importStar(require("react"));
const bleeps_1 = require("@arwes/bleeps");
const BleepsManagerContext_js_1 = require("../internal/BleepsManagerContext.js");
const BleepsProvider = (props) => {
    const { master, common, categories, bleeps, children } = props;
    const bleepsManager = (0, react_1.useMemo)(() => (0, bleeps_1.createBleepsManager)({ master, common, categories, bleeps }), []);
    (0, react_1.useEffect)(() => {
        bleepsManager?.update({ master, common, categories, bleeps });
    }, [master, common, categories, bleeps]);
    (0, react_1.useEffect)(() => {
        return () => {
            bleepsManager?.update({ common: { muted: true } });
            bleepsManager?.unload();
        };
    }, []);
    return (react_1.default.createElement(BleepsManagerContext_js_1.BleepsManagerContext.Provider, { value: bleepsManager }, children));
};
exports.BleepsProvider = BleepsProvider;
